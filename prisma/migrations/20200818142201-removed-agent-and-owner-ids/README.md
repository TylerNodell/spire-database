# Migration `20200818142201-removed-agent-and-owner-ids`

This migration has been generated by Tyler at 8/18/2020, 10:22:01 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "new_Unit" (
"id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
"createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
"buildingId" INTEGER NOT NULL,
"tenantId" INTEGER ,
"apt" TEXT NOT NULL,
"sale" BOOLEAN NOT NULL,
FOREIGN KEY ("buildingId") REFERENCES "Building"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

INSERT INTO "new_Unit" ("id", "createdAt", "buildingId", "tenantId", "apt", "sale") SELECT "id", "createdAt", "buildingId", "tenantId", "apt", "sale" FROM "Unit"

PRAGMA foreign_keys=off;
DROP TABLE "Unit";;
PRAGMA foreign_keys=on

ALTER TABLE "new_Unit" RENAME TO "Unit";

CREATE UNIQUE INDEX "Unit.tenantId_unique" ON "Unit"("tenantId")

PRAGMA foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200818141738-plural..20200818142201-removed-agent-and-owner-ids
--- datamodel.dml
+++ datamodel.dml
@@ -5,9 +5,9 @@
 ///
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 model Owner {
   id        Int      @default(autoincrement()) @id
@@ -49,13 +49,11 @@
 model Unit {
   id         Int      @default(autoincrement()) @id
   createdAt  DateTime @default(now())
   buildingId Int
-  ownerId    Int
   tenantId   Int?     @unique
   apt        String
   sale       Boolean
-  agentId    Int
   agent      Agent[]
   building   Building @relation(fields: [buildingId], references: [id])
   owner      Owner[]
   tenant     Tenant[]
```


